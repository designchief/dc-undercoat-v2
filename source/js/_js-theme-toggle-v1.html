<!-- DC Theme Toggle v1 - This version uses the system preference to begin with and then respects the toggle -->
<script defer>
  document.addEventListener("DOMContentLoaded", function() {
      // Theme switcher script goes here
      // Select the button
      const btn = document.querySelector("#themeToggle");
      // Check for dark mode preference at the OS level
      const prefersDarkScheme = window.matchMedia("(prefers-color-scheme: dark)");

      // Function to update the theme using a data attribute
      function updateTheme(theme) {
          // Set the data-theme attribute on the body
          document.documentElement.setAttribute("data-theme", theme);
      }

      // Get the user's theme preference from local storage
      let currentTheme = localStorage.getItem("theme");

      // Function to apply the initial theme based on preferences
      function applyInitialTheme() {
          // If no stored preference, use system preference
          if (!currentTheme) {
              currentTheme = prefersDarkScheme.matches ? "dark" : "light";
          }
          updateTheme(currentTheme);
      }

      // Apply the initial theme when the page loads
      applyInitialTheme();

      // Listen for a click on the button
      btn.addEventListener("click", function() {
          // Toggle the theme between light and dark
          currentTheme = currentTheme === "light" ? "dark" : "light";
          updateTheme(currentTheme);
          // Save the current preference to localStorage
          localStorage.setItem("theme", currentTheme);
      });
  });
</script>